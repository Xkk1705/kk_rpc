# kk_rpc
### 项目介绍
> Remote Procedure Call 即远程过程调用，是一种计算机通信协议，它允许程序在不同的计算机之间进行通信和交互，就像本地调用一样。
> 本项目基于Java+Etcd+Vert.x实现。开发者可以引入SpringBootStarter，通过注解和配置文件快速使用框架，像调用本地方法一样轻松调用远程服务；还支持通过SPI机制动态扩展序列化器、负载均衡器、重试和容错策略等。

## 系统设计

核心架构：包括消费方调用、序列化器、网络服务器、请求处理器、注册中心、负载均衡器、重试策略、容错策略等模块。

**RPC结构**
![](https://github.com/Xkk1705/kk_rpc/assets/97894317/9ce1e041-50a4-47ee-9a79-aa7da5467f5b)
**服务注册发现**
![](https://github.com/Xkk1705/kk_rpc/assets/97894317/d4faeb7f-56d7-4466-a676-13844545dbed)

1. 消费方调用：基于 JDK 动态代理 + 工厂模式实现消费方调用模块，为指定服务接口类生成可发送 HTTP 请求的代理对象，实现远程方法	的无感知调用。
2. 全局配置加载：使用双检锁单例模式维护全局配置对象，并通过 Hutool 的 Props 实现多环境配置文件的加载。
3. 可扩展设计：使用工厂模式 + 单例模式简化创建和获取序列化器对象的操作。并通过扫描资源路径 +反射自实现了 SPI 机制，用户可通过编写配置的方式扩展和指定自己的序列化器。
4. 消费者服务缓存：使用本地对象维护已获取到的服务提供者节点缓存，相比于每次从注册中心获取，性能提高了 xx%；并通过 Etcd 的 Watch 机制，监听节点的过期并自动更新缓存。
6.注册中心优化：利用定时任务和 Etcd Key 的 TTL 实现服务提供者的心跳检测和续期机制，节点下线一定时间后自动移除注册信息。





